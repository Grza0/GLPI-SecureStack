# ================================== #
# NGINX Reverse Proxy Configuration  #
# For: glpi.local and pma.local      #
# ================================== #

# -------- GLPI Virtual Host --------
server {
    listen 80;                    # Listen on port 80 (HTTP)
    server_name glpi.local;      # Requests for glpi.local will be handled here

    location / {
        proxy_pass http://glpi:80;                    # Forward to the container named 'glpi' on port 80
        proxy_set_header Host $host;                  # Preserve original Host header
        proxy_set_header X-Real-IP $remote_addr;      # Pass real client IP address
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # Add client IP to forwarded chain
        proxy_set_header X-Forwarded-Proto $scheme;   # Indicate if original request was HTTP or HTTPS
    }
}

# -------- phpMyAdmin Virtual Host --------
server {
    listen 80;                    # Listen on port 80 (HTTP)
    server_name pma.local;       # Requests for pma.local will be handled here

    location / {
        proxy_pass http://pma:80;                     # Forward to the container named 'pma' on port 80
        proxy_set_header Host $host;                  # Preserve original Host header
        proxy_set_header X-Real-IP $remote_addr;      # Pass real client IP address
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # Add client IP to forwarded chain
        proxy_set_header X-Forwarded-Proto $scheme;   # Indicate if original request was HTTP or HTTPS
    }
}

server {
    listen 80;                    # Listen on port 80 (HTTP)
    server_name portainer.local;       # Requests for pma.local will be handled here

    location / {
        proxy_pass http://portainer:9000;             # Forward to the container named 'pma' on port 80
        proxy_set_header Host $host;                  # Preserve original Host header
        proxy_set_header X-Real-IP $remote_addr;      # Pass real client IP address
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # Add client IP to forwarded chain
        proxy_set_header X-Forwarded-Proto $scheme;   # Indicate if original request was HTTP or HTTPS
    }
}

